<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Flutter 简明教程：从零创建一个flutter 项目 | 顾斯比</title>
<link rel="shortcut icon" href="http://blog.gusibi.site/favicon.ico?v=1593195803130">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.3.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="http://blog.gusibi.site/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="Flutter 简明教程：从零创建一个flutter 项目 | 顾斯比 - Atom Feed" href="http://blog.gusibi.site/atom.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">


<script async src="https://www.googletagmanager.com/gtag/js?id=UA-76238744-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-76238744-1');
</script>


    <meta name="description" content="
上一篇介绍了Flutter 安装配置 相关内容，接下来这一篇先新来一个示例介绍一下Flutter项目的基本结构。

新建项目

打开编辑器（这里以IntelliJ IDEA为例，Android Studio基本一致）
File&gt;Ne..." />
    <meta name="keywords" content="Flutter,前端,教程" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
    <script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="http://blog.gusibi.site">
  <img class="avatar" src="http://blog.gusibi.site/images/avatar.png?v=1593195803130" alt="">
  </a>
  <h1 class="site-title">
    顾斯比
  </h1>
  <p class="site-description">
    这个人很懒
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          首页
        </a>
      
    
      
        <a href="/archives" class="menu">
          归档
        </a>
      
    
      
        <a href="/tags" class="menu">
          标签
        </a>
      
    
      
        <a href="/post/about" class="menu">
          关于
        </a>
      
    
  </div>
  <div class="social-container">
    
      
        <a href="https://github.com/gusibi" target="_blank">
          <i class="ri-github-line"></i>
        </a>
      
    
      
        <a href="https://twitter.com/amazing_gs" target="_blank">
          <i class="ri-twitter-line"></i>
        </a>
      
    
      
    
      
    
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              Flutter 简明教程：从零创建一个flutter 项目
            </h2>
            <div class="post-info">
              <span>
                2020-06-21
              </span>
              <span>
                7 min read
              </span>
              
                <a href="http://blog.gusibi.site/tag/crhvilrYib/" class="post-tag">
                  # Flutter
                </a>
              
                <a href="http://blog.gusibi.site/tag/QFxrVQKr-F/" class="post-tag">
                  # 前端
                </a>
              
                <a href="http://blog.gusibi.site/tag/Ez7OfGV-oL/" class="post-tag">
                  # 教程
                </a>
              
            </div>
            
              <img class="post-feature-image" src="http://blog.gusibi.site/post-images/flutter-01-first-demo.png" alt="">
            
            <div class="post-content-wrapper">
              <div class="post-content">
                <blockquote>
<p>上一篇介绍了Flutter 安装配置 相关内容，接下来这一篇先新来一个示例介绍一下Flutter项目的基本结构。</p>
</blockquote>
<h3 id="新建项目">新建项目</h3>
<ol>
<li>打开编辑器（这里以IntelliJ IDEA为例，Android Studio基本一致）</li>
<li>File&gt;New&gt;Project，选择Flutter 项目</li>
</ol>
<figure data-type="image" tabindex="1"><img src="http://media.gusibi.mobi/dGPyk4Ns6SXdcofOPiVnCFFQVB_5KDhmH2Sve9aJVqSKMM4L4wKYNMrA9WEqryKr" alt="截屏2020-06-21 上午9.27.06.png" loading="lazy"></figure>
<p>Next 填写项目相关内容，Organization 这里通常建议是域倒写.</p>
<figure data-type="image" tabindex="2"><img src="http://media.gusibi.mobi/i_IjC0yQntSYtqBN_T3IZrIVHJvdrE270FBIQv4efgVrKydlwabV-mVYhlDBorzg" alt="截屏2020-06-21 上午9.29.01.png" loading="lazy"></figure>
<p>填写完毕点击FINISH，将会自动生成一个示例项目。</p>
<figure data-type="image" tabindex="3"><img src="http://media.gusibi.mobi/A5sMHWavEsRD58OpTp1Wm4St-nhW4Llfq3f0wny9HjRu6sep9NHIj0iyWs50hOYY" alt="截屏2020-06-21 上午9.29.24.png" loading="lazy"></figure>
<ol>
<li>打开模拟器：点击上方菜单栏，选择模拟器（这里选择iOS 模拟器）</li>
</ol>
<figure data-type="image" tabindex="4"><img src="http://media.gusibi.mobi/jxTB2M2NfYI4Xv7RjUYbDcbFa-CSb_1RV7b-0Aw-6_ZwIlWqIei1uA54ZLIg9zPE" alt="截屏2020-06-21 上午9.30.00.png" loading="lazy"></figure>
<p>点击后，iOS模拟器会启动，但是还需要再选择设备</p>
<figure data-type="image" tabindex="5"><img src="http://media.gusibi.mobi/IBuKm-DNtEapZpYbnGRu2JKD0kuXm3jHqyMOB1OGom5H_c84U9wmQdadz0ZC47MS" alt="截屏2020-06-21 上午9.33.37.png" loading="lazy"></figure>
<p>启动后界面如下：</p>
<figure data-type="image" tabindex="6"><img src="http://media.gusibi.mobi/pkkAFSa4UBv7xqRPgs2Yp4-o0whml1MKlbl53C0msalQGPoRQb2ublKnVH8tM0xZ" alt="截屏2020-06-21 上午9.33.50.png" loading="lazy"></figure>
<p>现在可以点击菜单栏上方运行项目，输出结果如下</p>
<pre><code class="language-shell">Launching lib/main.dart on iPhone 11 in debug mode...
Running Xcode build...
Xcode build done.                                           46.6s
Debug service listening on ws://127.0.0.1:61858/TQG1yn-Cjq0=/ws
Syncing files to device iPhone 11...
</code></pre>
<p>现在一个简单的项目就启动完毕。</p>
<figure data-type="image" tabindex="7"><img src="http://media.gusibi.mobi/UXwr5FZ8T9BH1ZyT4rqcGb6F3uJrSf0_5MVjL4Pm_OpxhB9N4BxvIfxuVmm0a-Yh" alt="Simulator Screen Shot - iPhone 11 - 2020-06-21 at 09.35.48.png" loading="lazy"></figure>
<p>第一次真机运行的时候可能会需要更多的等待时间，但是接下来你就可以使用热重载（hot reload）功能，热重载可以在运行时更新预览。</p>
<h3 id="项目目录">项目目录</h3>
<pre><code class="language-shell">├── README.md
├── android
├── build
├── hello_world.iml
├── ios
├── lib
├── pubspec.lock
├── pubspec.yaml
└── test
</code></pre>
<p>主要关注以下几个文件/目录：</p>
<table>
<thead>
<tr>
<th><strong>文件/目录</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>android</td>
<td>android 平台相关代码</td>
</tr>
<tr>
<td>ios</td>
<td>iOS平台相关代码</td>
</tr>
<tr>
<td>lib</td>
<td>flutter 应用代码，编写的代码在此目录</td>
</tr>
<tr>
<td>test</td>
<td>测试相关代码</td>
</tr>
<tr>
<td>pubspec.yaml</td>
<td>管理 Flutter 应用程序的 assets（资源，如图片、package等）</td>
</tr>
</tbody>
</table>
<h3 id="代码介绍">代码介绍</h3>
<pre><code class="language-javascript">import 'package:flutter/material.dart';

void main() =&gt; runApp(MyApp());

// MyApp 不需要做状态管处理，此组件继承StatelessWidget 即可
class MyApp extends StatelessWidget {
  // This widget is the root of your application.
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Flutter Demo',
      theme: ThemeData(
        primarySwatch: Colors.blue,
        visualDensity: VisualDensity.adaptivePlatformDensity,
      ),
      home: MyHomePage(title: 'Flutter Demo Home Page'),
    );
  }
}

class MyHomePage extends StatefulWidget {
  MyHomePage({Key key, this.title}) : super(key: key);

  final String title;

  @override
  _MyHomePageState createState() =&gt; _MyHomePageState(); // 重写
}

// 状态类必须继承自 State类
class _MyHomePageState extends State&lt;MyHomePage&gt; {
  int _counter = 0; // 定义一个变量 _counter 作为计数器变量，调用 setState 方法来控制这个变量的值变化

  void _incrementCounter() {
    setState(() {
      _counter++;
    });
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        // Here we take the value from the MyHomePage object that was created by
        // the App.build method, and use it to set our appbar title.
        title: Text(widget.title),
      ),
      body: Center(
        // Center is a layout widget. It takes a single child and positions it
        // in the middle of the parent.
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: &lt;Widget&gt;[
            Text(
              'You have clicked the button this many times:',
            ),
            Text(
              '$_counter',
              style: Theme.of(context).textTheme.headline4,
            ),
          ],
        ),
      ),
      floatingActionButton: FloatingActionButton(
        onPressed: _incrementCounter,
        tooltip: 'Increment',
        child: Icon(Icons.add),
      ), // This trailing comma makes auto-formatting nicer for build methods.
    );
  }
}
</code></pre>
<ul>
<li>代码第一行引入了 material.dart 包，使用此包，模板代码创建了一个具有 Material Design 风格的应用（ <a href="https://material-io.cn/guidelines">Material</a> 是一种移动端和网页端通用的视觉设计语言， Flutter 提供了丰富的 Material 风格的 widgets。</li>
<li><code>void main() =&gt; runApp(MyApp());</code> 主函数（main）使用了 (<code>=&gt;</code>) 符号，这是 Dart 中单行函数或方法的简写，等同于下属代码</li>
</ul>
<pre><code class="language-dart">void main() {
  runApp(MyApp());
}
</code></pre>
<p>flutter 项目都需要在开始的时候执行main 函数，使用runApp() 函数可以讲给定的根组件填满整个屏幕。（如果不调用runApp() 函数，项目也可以正常运行，但是屏幕上什么都不会显示。</p>
<h4 id="状态管理">状态管理</h4>
<ul>
<li>
<p>该应用程序继承了 <code>StatelessWidget</code>，这将会使应用本身也成为一个 widget。在 Flutter 中，几乎所有都是 widget，包括对齐 (alignment)、填充 (padding) 和布局 (layout)。</p>
</li>
<li>
<p><strong>State</strong>*<strong>less*</strong> <strong>widgets 是不可变的，这意味着它们的属性不能改变 —— 所有的值都是 final。</strong></p>
</li>
<li>
<p><strong>State</strong>*<strong>ful*</strong> <strong>widgets 持有的状态可能在 widget 生命周期中发生变化，实现一个 stateful widget 至少需要两个类：</strong></p>
</li>
<li>
<ul>
<li>1）一个 StatefulWidget 类，本身是不可变的</li>
<li>2）一个 State 类，但是 State 类在 widget 生命周期中始终存在。</li>
</ul>
</li>
<li>
<p>MyHomePage 类是一个Stateful widgets（有状态的 widget）</p>
</li>
<li>
<ul>
<li>必须继承自<strong>StatefulWidget</strong></li>
<li>它创建自己的状态类 —— _MyHomePageState，并将 MyHomePage 内嵌到已有的无状态的 <code>MyApp</code> widget。</li>
<li>需要重写createState 方法，代码如下：</li>
</ul>
</li>
</ul>
<pre><code class="language-dart">@override
_MyHomePageState createState() =&gt; _MyHomePageState();
</code></pre>
<ul>
<li>
<p><code>Scaffold</code> 是 Material 库中提供的一个 widget，它提供了默认的导航栏、标题和包含主屏幕 widget 树的 body 属性。</p>
</li>
<li>
<ul>
<li>现在在Scaffold 中添加 backgroundColor: Colors.amber</li>
</ul>
</li>
</ul>
<pre><code class="language-dart">Widget build(BuildContext context) {
    return Scaffold(
      ...
      backgroundColor: Colors.amber,
      ...
    );
  }
</code></pre>
<p>保存代码后，页面应该会自动刷新，结果如下：</p>
<figure data-type="image" tabindex="8"><img src="http://media.gusibi.mobi/a5RewdDN10105G5S_vJ0Kc1W9UdEp2MIBit_ALAK6ldckaBix7SlOj3wpR6n1FZz" alt="Simulator Screen Shot - iPhone 11 - 2020-06-21 at 17.41.29.png" loading="lazy"></figure>
<p>如果自动保存后页面没有自动重载，可以点击下图红圈中按钮查看更新后结果。</p>
<figure data-type="image" tabindex="9"><img src="http://media.gusibi.mobi/NdtaTSTSLDhz4bjlRtATlliCBSKOeBgmFH_1bDKu2lSKYqBQ9FDTMSSpgZhcTdSO" alt="截屏2020-06-21 上午9.36.57.png" loading="lazy"></figure>
<ul>
<li>一个 widget 的主要工作是提供一个 <code>build()</code> 方法来描述如何根据其他较低级别的 widgets 来显示自己。</li>
<li>本示例中的 body 的 widget 树中包含了一个 <code>Center</code> widget， Center widget 又包含一个 <code>Text</code> 子 widget， Center widget 可以将其子 widget 树对齐到屏幕中心。</li>
</ul>
<h3 id="使用第三方包">使用第三方包</h3>
<p>现在这个模板代码比较简单，接下来我们扩展一下，在pubspec.yaml 中，将 english_words（3.1.5 或更高版本）添加到依赖项列表，如下所示：</p>
<p>在 编辑器视图中查看 <code>pubspec.yaml</code> 文件时，点击 <strong>Pub get</strong> 会将依赖包安装到你的项目。你应该会在控制台中看到以下内容：</p>
<pre><code class="language-shell">Running &quot;flutter pub get&quot; in hello_world...                         0.6s
Process finished with exit code 0
</code></pre>
<p>在执行 <code>Pub get</code> 命令时会自动生成一个名为 <code>pubspec.lock</code> 文件，这里包含了你依赖 packages 的名称和版本。</p>
<p>然后在lib/main.dart 代码第二行加入 import 'package:english_words/english_words.dart';</p>
<p>如果你尝试热重载，则可能会看到一条警告，考虑重新启动当前应用：</p>
<pre><code class="language-shell">Reloading…
Some program elements were changed during reload but did not run when the view was reassembled; 
you might need to restart the app (by pressing “R”) for the changes to have an effect.
</code></pre>
<p>因为重启应用之后就可以生效，故这可能是误报。现在只需点击build 按钮重新build。</p>
<p>修改后的代码如下：</p>
<pre><code class="language-dart">class _MyHomePageState extends State&lt;MyHomePage&gt; {
  int _counter = 0;

  void _incrementCounter() {
    setState(() {
      _counter++;
    });
  }

  @override
  Widget build(BuildContext context) {
    final wordPair = WordPair.random();
    return Scaffold(
      ...
      body: Center(
        // Center is a layout widget. It takes a single child and positions it
        // in the middle of the parent.
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: &lt;Widget&gt;[
            Text(
              'You have clicked the button this many times:',
            ),
            Text(
              '$_counter',
              style: Theme.of(context).textTheme.headline4,
            ),
            Text(
              'Words Pair:' + wordPair.asPascalCase,
            ),
          ],
        ),
      ),
      ...
  }
}
</code></pre>
<h3 id=""><img src="http://media.gusibi.mobi/NvWnrQJRvVTBmWz1S76ZyzyJ9Ey0ANcubkNjw6S9Pmh9bUeQbEb4HvZiL36dnMaU" alt="Simulator Screen Shot - iPhone 11 - 2020-06-21 at 18.23.27.png" loading="lazy"></h3>
<p>此时点击右下角的按钮，数字会增加，单词对也会更新。</p>
<h3 id="参考链接">参考链接</h3>
<ol>
<li>https://flutter.cn/docs/cookbook/design/themes</li>
<li>https://flutter.cn/docs/get-started/codelab</li>
</ol>
<hr>
<p><strong>最后，感谢女朋友支持和包容，比❤️</strong></p>
<p>也可以在公号输入以下关键字获取历史文章：<code>公号&amp;小程序</code> | <code>设计模式</code> | <code>并发&amp;协程</code></p>
<figure data-type="image" tabindex="10"><img src="http://media.gusibi.mobi/WDz3v4cU4LQq1oyKX-fYK1LxIThzZ1hK931ZaPRC8CdcB0t2oTYJciMDuAws70FY" alt="扫码关注" loading="lazy"></figure>
<hr>
<h3 id="内推时间">内推时间</h3>
<figure data-type="image" tabindex="11"><img src="http://media.gusibi.mobi/5FzreeM6IYt55JSQMAV63INPIvuPik75FlJAbP1e7Zdlg1WPe6BrHI-q0jkXskGf" alt="" loading="lazy"></figure>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li>
<ul>
<li>
<ul>
<li><a href="#%E6%96%B0%E5%BB%BA%E9%A1%B9%E7%9B%AE">新建项目</a></li>
<li><a href="#%E9%A1%B9%E7%9B%AE%E7%9B%AE%E5%BD%95">项目目录</a></li>
<li><a href="#%E4%BB%A3%E7%A0%81%E4%BB%8B%E7%BB%8D">代码介绍</a>
<ul>
<li><a href="#%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86">状态管理</a></li>
</ul>
</li>
<li><a href="#%E4%BD%BF%E7%94%A8%E7%AC%AC%E4%B8%89%E6%96%B9%E5%8C%85">使用第三方包</a></li>
<li><a href="#">!Simulator Screen Shot - iPhone 11 - 2020-06-21 at 18.23.27.png</a></li>
<li><a href="#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5">参考链接</a></li>
<li><a href="#%E5%86%85%E6%8E%A8%E6%97%B6%E9%97%B4">内推时间</a></li>
</ul>
</li>
</ul>
</li>
</ul>

              </div>
            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">下一篇</div>
            <a href="http://blog.gusibi.site/post/vuepress-build-blog-to-github/">
              <h3 class="post-title">
                使用VuePress 搭建个人博客
              </h3>
            </a>
          </div>
        

        
          

          
            <link rel="stylesheet" href="https://unpkg.com/disqusjs@1.1/dist/disqusjs.css">
<script src="https://unpkg.com/disqusjs@1.1/dist/disqus.js"></script>

<div id="disqus_thread"></div>

<script>

var options = {
  shortname: 'gu-si-bi',
  apikey: '',
}
if ('') {
  options.api = ''
}
var dsqjs = new DisqusJS(options)

</script>

          
        

        <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
  <a class="rss" href="http://blog.gusibi.site/atom.xml" target="_blank">
    <i class="ri-rss-line"></i> RSS
  </a>
</div>

      </div>
    </div>

    <script>
      hljs.initHighlightingOnLoad()

      let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

      // This should probably be throttled.
      // Especially because it triggers during smooth scrolling.
      // https://lodash.com/docs/4.17.10#throttle
      // You could do like...
      // window.addEventListener("scroll", () => {
      //    _.throttle(doThatStuff, 100);
      // });
      // Only not doing it here to keep this Pen dependency-free.

      window.addEventListener("scroll", event => {
        let fromTop = window.scrollY;

        mainNavLinks.forEach((link, index) => {
          let section = document.getElementById(decodeURI(link.hash).substring(1));
          let nextSection = null
          if (mainNavLinks[index + 1]) {
            nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
          }
          if (section.offsetTop <= fromTop) {
            if (nextSection) {
              if (nextSection.offsetTop > fromTop) {
                link.classList.add("current");
              } else {
                link.classList.remove("current");    
              }
            } else {
              link.classList.add("current");
            }
          } else {
            link.classList.remove("current");
          }
        });
      });

    </script>
  </body>
</html>
