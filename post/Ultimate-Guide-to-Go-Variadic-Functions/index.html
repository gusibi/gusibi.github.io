<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ã€è¯‘ã€‘golang å¯å˜å‚æ•°å‡½æ•°ç»ˆææŒ‡å— | é¡¾æ–¯æ¯”</title>
<link rel="shortcut icon" href="http://blog.gusibi.site/favicon.ico?v=1597591641172">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.3.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="http://blog.gusibi.site/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="ã€è¯‘ã€‘golang å¯å˜å‚æ•°å‡½æ•°ç»ˆææŒ‡å— | é¡¾æ–¯æ¯” - Atom Feed" href="http://blog.gusibi.site/atom.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">


<script async src="https://www.googletagmanager.com/gtag/js?id=UA-76238744-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-76238744-1');
</script>


    <meta name="description" content="

ä½¿ç”¨å¸¸ç”¨æ¨¡å¼å­¦ä¹ å…³äºgoè¯­è¨€å¯å˜å‚æ•°å‡½æ•°çš„ä¸€åˆ‡

Ultimate Guide to Go Variadic Functions åŸæ–‡åœ°å€
ä»€ä¹ˆæ˜¯å¯å˜å‚æ•°å‡½æ•°ï¼Ÿ
å¯å˜å‚æ•°å‡½æ•°æ˜¯æŒ‡ä¼ å…¥å‚æ•°æ˜¯å¯å˜æ•°é‡ï¼ˆ0åˆ°æ›´å¤šï¼‰çš„å‡½æ•°ã€‚åœ¨è¾“å…¥çš„å˜é‡ç±»å‹å‰é¢..." />
    <meta name="keywords" content="golang" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
    <script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="http://blog.gusibi.site">
  <img class="avatar" src="http://blog.gusibi.site/images/avatar.png?v=1597591641172" alt="">
  </a>
  <h1 class="site-title">
    é¡¾æ–¯æ¯”
  </h1>
  <p class="site-description">
    è¿™ä¸ªäººå¾ˆæ‡’
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?eb5ce2e96866802764816b111f5a3ffb";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          é¦–é¡µ
        </a>
      
    
      
        <a href="/archives" class="menu">
          å½’æ¡£
        </a>
      
    
      
        <a href="/tags" class="menu">
          æ ‡ç­¾
        </a>
      
    
      
        <a href="/post/about" class="menu">
          å…³äº
        </a>
      
    
  </div>
  <div class="social-container">
    
      
        <a href="https://github.com/gusibi" target="_blank">
          <i class="ri-github-line"></i>
        </a>
      
    
      
        <a href="https://twitter.com/amazing_gs" target="_blank">
          <i class="ri-twitter-line"></i>
        </a>
      
    
      
    
      
    
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              ã€è¯‘ã€‘golang å¯å˜å‚æ•°å‡½æ•°ç»ˆææŒ‡å—
            </h2>
            <div class="post-info">
              <span>
                2020-08-16
              </span>
              <span>
                13 min read
              </span>
              
                <a href="http://blog.gusibi.site/tag/dE3Sy1WOcy/" class="post-tag">
                  # golang
                </a>
              
            </div>
            
              <img class="post-feature-image" src="http://blog.gusibi.site/post-images/Ultimate-Guide-to-Go-Variadic-Functions.png" alt="">
            
            <div class="post-content-wrapper">
              <div class="post-content">
                <figure data-type="image" tabindex="1"><img src="http://blog.gusibi.site/post-images/1597590154875.png" alt="" loading="lazy"></figure>
<blockquote>
<p>ä½¿ç”¨å¸¸ç”¨æ¨¡å¼å­¦ä¹ å…³äºgoè¯­è¨€å¯å˜å‚æ•°å‡½æ•°çš„ä¸€åˆ‡</p>
</blockquote>
<p><a href="https://blog.learngoprogramming.com/golang-variadic-funcs-how-to-patterns-369408f19085">Ultimate Guide to Go Variadic Functions åŸæ–‡åœ°å€</a></p>
<h1 id="ä»€ä¹ˆæ˜¯å¯å˜å‚æ•°å‡½æ•°">ä»€ä¹ˆæ˜¯å¯å˜å‚æ•°å‡½æ•°ï¼Ÿ</h1>
<p>å¯å˜å‚æ•°å‡½æ•°æ˜¯æŒ‡ä¼ å…¥å‚æ•°æ˜¯å¯å˜æ•°é‡ï¼ˆ0åˆ°æ›´å¤šï¼‰çš„å‡½æ•°ã€‚åœ¨è¾“å…¥çš„å˜é‡ç±»å‹å‰é¢çš„çœç•¥å·(ä¸‰ç‚¹)å‰ç¼€å³æ„æˆä¸€ä¸ªæœ‰æ•ˆçš„å˜é‡ã€‚</p>
<figure data-type="image" tabindex="2"><img src="http://media.gusibi.mobi/-kn_OQyfZYXrKDs4rz2CYh3wtwEQUaEa5gjqqcZd1Db8S-Bm1UtlS3R5Pg_7wT-j" alt="2" loading="lazy"></figure>
<blockquote>
<p>å£°æ˜ä¸€ä¸ªå¯å˜å‚æ•°åä¸ºâ€œ namesâ€ï¼Œç±»å‹ä¸ºstring çš„å¯å˜å‚æ•°å‡½æ•°</p>
</blockquote>
<h2 id="ä¸€ä¸ªç®€å•çš„å¯å˜å‚æ•°å‡½æ•°">ä¸€ä¸ªç®€å•çš„å¯å˜å‚æ•°å‡½æ•°</h2>
<p>è¿™ä¸ª func ä»¥å­—ç¬¦ä¸²çš„å½¢å¼è¿”å›ä¼ é€’çš„å‚æ•°ï¼Œå­—ç¬¦ä¸²ä¹‹é—´ç”¨ç©ºæ ¼åˆ†éš”ã€‚</p>
<pre><code class="language-golang">
func toFullname(names ...string) string {
  return strings.Join(names, &quot; &quot;)
}
</code></pre>
<p><img src="https://miro.medium.com/max/10000/1*_rdOI_SbL9m07QBcKMqz5Q.png" alt="Image for post" loading="lazy"> You can pass zero or more params</p>
<h2 id="ä½ å¯ä»¥ä¼ å…¥é›¶ä¸ªæˆ–å¤šä¸ªå‚æ•°">ä½ å¯ä»¥ä¼ å…¥é›¶ä¸ªæˆ–å¤šä¸ªå‚æ•°</h2>
<pre><code class="language-go">toFullname(&quot;carl&quot;, &quot;sagan&quot;)// output: &quot;carl sagan&quot;
toFullname(&quot;carl&quot;)// output: &quot;carl&quot;
toFullname()// output: &quot;&quot;
</code></pre>
<h2 id="ä»€ä¹ˆæ—¶å€™ä½¿ç”¨å¯å˜å‚æ•°å‡½æ•°">ä»€ä¹ˆæ—¶å€™ä½¿ç”¨å¯å˜å‚æ•°å‡½æ•°ï¼Ÿ</h2>
<ul>
<li><em>çœç•¥åˆ›å»ºä»…ä½œä¸ºå‡½æ•°å‚æ•°åˆ›å»ºä¸´æ—¶ slice å˜é‡</em></li>
<li><em>å½“è¾“å…¥å‚æ•°çš„é•¿åº¦æœªçŸ¥æ—¶</em></li>
<li><em>è¡¨è¾¾ä½ å¢åŠ å¯è¯»æ€§çš„æ„å›¾</em></li>
</ul>
<h2 id="ä¾‹å­">ä¾‹å­:</h2>
<p>çœ‹çœ‹ <code>Go Stdlib</code> çš„ <code>fmt. Println</code> å‡½æ•°ï¼Œå°±ä¼šæ˜ç™½å®ƒæ˜¯å¦‚ä½•ä½¿è‡ªå·±å˜å¾—æ˜“äºä½¿ç”¨çš„ã€‚</p>
<p>å®ƒä½¿ç”¨å¯å˜å‚æ•°å‡½æ•°æ¥å—å¯é€‰çš„è¾“å…¥å‚æ•°æ•°ç›®ã€‚</p>
<pre><code class="language-go">func Println(a ...interface{})
</code></pre>
<p>å¦‚æœå®ƒä¸æ˜¯ä¸€ä¸ªå¯å˜å‚æ•°å‡½æ•°ï¼Œå®ƒçœ‹èµ·æ¥ä¼šæ˜¯è¿™æ ·çš„:</p>
<pre><code class="language-go">func Println(params []interface{})
</code></pre>
<p>ä½ éœ€è¦ä¼ é€’ä¸€ä¸ª slice æ‰èƒ½ä½¿ç”¨å®ƒãƒ¼ãƒ¼ verboseï¼Œæ˜¯çš„! :</p>
<pre><code class="language-go">fmt.Println([]interface{}{&quot;hello&quot;, &quot;world&quot;})
</code></pre>
<p>ç›¸æ¯”è€Œè¨€ï¼Œåœ¨å¯å˜å‚æ•°å‡½æ•°å½¢å¼ä¸­ï¼Œå®ƒçš„ä½¿ç”¨æ˜¯ç®€å•çš„:</p>
<pre><code class="language-go">fmt.Println(&quot;hello&quot;, &quot;world&quot;)
fmt.Println(&quot;hello&quot;)
fmt.Println()
</code></pre>
<blockquote>
<p>åœ¨è¿™ä¹‹åçš„éƒ¨åˆ†ï¼Œå°†ä¼šä»‹ç»ä¸€äº›å…³äº å¯å˜å‚æ•°å‡½æ•° çš„ç»†èŠ‚å’Œå¸¸ç”¨æ¨¡å¼çš„ä¾‹å­ã€‚</p>
</blockquote>
<h1 id="åˆ‡ç‰‡ä¸å¯å˜å‚æ•°å‡½æ•°">åˆ‡ç‰‡ä¸å¯å˜å‚æ•°å‡½æ•°</h1>
<p>å¯å˜å‚æ•°åœ¨å‡½æ•°ä¸­ä¼šè¢«è½¬æ¢ä¸ºâ€œæ–°çš„â€åˆ‡ç‰‡ã€‚å¯å˜å‚æ•°å®é™…ä¸Šæ˜¯ slice ç±»å‹çš„å‚æ•°çš„è¯­æ³•ç³–ã€‚</p>
<figure data-type="image" tabindex="3"><img src="http://media.gusibi.mobi/ELkTXYrLqO41gRC0fl7rz971NPHdCcS0yExDtNqgFCNMjNigJGgDik0XI-tXw3wi" alt="3" loading="lazy"></figure>
<h2 id="ä¸ä¼ å…¥å‚æ•°">ä¸ä¼ å…¥å‚æ•°</h2>
<p>å¦‚æœä¸å‘å…¶ä¼ é€’ä»»ä½•å€¼ï¼Œå°±ç›¸å½“äºå‘å¯å˜å‚æ•°å‡½æ•°ä¼ é€’äº† nil åˆ‡ç‰‡ã€‚</p>
<figure data-type="image" tabindex="4"><img src="http://media.gusibi.mobi/9RBDcXhqLuLBy4oZOANH_3w6Bez2l5vTYpZounxZna8HaWhiaPXtg9o2g_3dYpgC" alt="4" loading="lazy"></figure>
<p>æ‰€æœ‰éç©ºåˆ‡ç‰‡éƒ½æœ‰å†…å»ºæ•°ç»„ï¼Œè€Œ nil ç‰‡åˆ™æ²¡æœ‰ã€‚</p>
<pre><code class="language-go">func toFullname(names ...string) []string {
  return names
}

// names å†…å»ºæ•°ç»„ä¸º: nil
</code></pre>
<p>ä½†æ˜¯ï¼Œå½“ä½ å‘å¯å˜å‚æ•°å‡½æ•°æ·»åŠ å‚æ•°æ—¶ï¼Œå®ƒå°†åˆ›å»ºä¸€ä¸ªä¸ä½ ä¼ å…¥å‚æ•°ç›¸å…³è”çš„æ•°ç»„ï¼Œè€Œä¸å†æ˜¯ä¸€ä¸ªç©ºåˆ‡ç‰‡ã€‚</p>
<p>goè¯­è¨€å†…ç½®å‡½æ•°<code>append</code> å°†å‚æ•°è¿½åŠ åˆ°ç°æœ‰çš„sliceï¼Œå¹¶è¿”å›ã€‚<code>append</code> ä¹Ÿæ˜¯ä¸€ä¸ªå¯å˜å‚æ•°å‡½æ•°ã€‚</p>
<pre><code class="language-go">func toFullname(names ...string) []string {
  return append(names, &quot;hey&quot;, &quot;what's up?&quot;)
}

toFullname()

// output: [hey what's up?]
</code></pre>
<h2 id="å¦‚ä½•ä¼ é€’ä¸€ä¸ªåˆ‡ç‰‡">å¦‚ä½•ä¼ é€’ä¸€ä¸ªåˆ‡ç‰‡ï¼Ÿ</h2>
<p>é€šè¿‡å°†å¯å˜å‚æ•°è¿ç®—ç¬¦<code>...</code> åŠ åœ¨ç°æœ‰åˆ‡ç‰‡åï¼Œå¯ä»¥å°†å…¶ä¼ é€’ç»™å¯å˜å‚æ•°è¿ç®—ç¬¦ã€‚</p>
<pre><code class="language-go">names := []string{&quot;carl&quot;, &quot;sagan&quot;)}

toFullname(names...)// output: &quot;carl sagan&quot;
</code></pre>
<p>è¿™ç­‰åŒäºä»¥ä¸‹è°ƒç”¨:</p>
<pre><code class="language-go">toFullname(&quot;carl&quot;, &quot;sagan&quot;)
</code></pre>
<p><strong>ä½†æ˜¯ï¼Œæœ‰ä¸€ç‚¹ä¸åŒï¼š</strong> ï¼Œåœ¨å‡½æ•°ä¸­å°†ç›´æ¥ä½¿ç”¨ä¼ å…¥çš„åˆ‡ç‰‡è€Œä¸æ˜¯åˆ›å»ºæ–°çš„åˆ‡ç‰‡ã€‚å…³äºè¿™ä¸€ç‚¹ï¼Œè¯·å‚é˜…ä»¥ä¸‹å†…å®¹ã€‚</p>
<figure data-type="image" tabindex="5"><img src="http://media.gusibi.mobi/I78AMp2oauglKBaN-v2vInPqqOddUZSAnsOLwqI-nOQUu1tUZq5E6H2kb_ksQems" alt="5" loading="lazy"></figure>
<p>åƒä¸‹é¢è¿™æ ·ï¼Œä½ ä¹Ÿå¯ä»¥å°†æ•°ç»„ä½œä¸ºå¯å˜å‚æ•°å‡½æ•°çš„å‚æ•°:</p>
<pre><code class="language-go">names := [2]string{&quot;carl&quot;, &quot;sagan&quot;}
toFullname(names[:]...)
</code></pre>
<h2 id="passed-slices-spooky-action-at-a-distance">Passed sliceâ€™s spooky action at a distance</h2>
<blockquote>
<p>æ ‡é¢˜ä¸çŸ¥é“æ€ä¹ˆç¿»è¯‘...</p>
</blockquote>
<p>å‡è®¾ä½ å°†ä¸€ä¸ª slice ä½œä¸ºå‚æ•°ä¼ ç»™ä¸€ä¸ªå¯å˜å‚æ•°å‡½æ•°:</p>
<pre><code class="language-go">dennis := []string{&quot;dennis&quot;, &quot;ritchie&quot;}
toFullname(dennis...)
</code></pre>
<p>å†å‡è®¾ä½ ä¿®æ”¹äº†å‡½æ•°ä¸­å˜é‡å‚æ•°çš„ç¬¬ä¸€é¡¹:</p>
<pre><code class="language-go">func toFullname(names ...string) string {
  names[0] = &quot;guy&quot;
  return strings.Join(names, &quot; &quot;)
}
</code></pre>
<p>ä¿®æ”¹å®ƒä¹Ÿä¼šå½±å“åŸå§‹çš„åˆ‡ç‰‡ã€‚â€œ dennisâ€åˆ‡ç‰‡ç°åœ¨å˜æˆäº†:</p>
<pre><code class="language-go">[]string{&quot;guy&quot;, &quot;ritchie&quot;}
</code></pre>
<p>è€Œä¸æ˜¯åŸå§‹å€¼:</p>
<pre><code class="language-go">[]string{&quot;dennis&quot;, &quot;ritchie&quot;}
</code></pre>
<p>å› ä¸ºä¼ å…¥çš„ slice ä¸ func å†…éƒ¨çš„ slice å…±äº«ç›¸åŒçš„åº•å±‚æ•°ç»„ï¼Œæ‰€ä»¥åœ¨ func å†…éƒ¨æ”¹å˜ slice çš„å€¼ä¹Ÿä¼šå½±å“ä¼ å…¥çš„ slice:</p>
<figure data-type="image" tabindex="6"><img src="http://media.gusibi.mobi/AbFuGA5LzxztjxBQ_D7oWHdkh-AZifMm4m1_E-iGRbezqRmO3ZeT-siWIfoYBnWc" alt="6" loading="lazy"></figure>
<p>å¦‚æœä½ ç›´æ¥ä¼ é€’å‚æ•°(ä¸ä½¿ç”¨åˆ‡ç‰‡) ï¼Œå°±ä¸ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µã€‚</p>
<h2 id="åŠ¨æ€ä¼ é€’å¤šä¸ªåˆ‡ç‰‡">åŠ¨æ€ä¼ é€’å¤šä¸ªåˆ‡ç‰‡</h2>
<p>å‡è®¾ä½ æƒ³åœ¨ slice ä¼ é€’ç»™ func ä¹‹å‰ï¼Œåœ¨ slice å‰é¢æ·»åŠ â€œ mr. â€ã€‚</p>
<pre><code class="language-go">names := []string{&quot;carl&quot;, &quot;sagan&quot;}
</code></pre>
<p>é¦–å…ˆ<code>append</code> å‡½æ•°ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„åˆ‡ç‰‡ï¼Œç„¶åå°†nameså±•å¼€ï¼Œ ç„¶åå°†å€¼ä¾æ¬¡æ·»åŠ åˆ°æ–°åˆ›å»ºçš„åˆ‡ç‰‡ä¸Šï¼Œç„¶åå†å°†å±•å¼€çš„ç»“æœä¼ ç»™ <code>toFullname</code> å‡½æ•°:</p>
<pre><code class="language-go">toFullname(append([]string{&quot;mr.&quot;}, names...)...)

// output: &quot;mr. carl sagan&quot;
</code></pre>
<p>è¿™å’Œä¸‹é¢çš„ä»£ç ä¸€æ ·:</p>
<pre><code class="language-go">names = append([]string{&quot;mr.&quot;}, &quot;carl&quot;, &quot;sagan&quot;)
toFullname(names...)

// or with this:
toFullname([]string{&quot;mr.&quot;, &quot;carl&quot;, &quot;sagan&quot;}...)

// or with thisâ€”except passing an existing slice:
toFullname(&quot;mr.&quot;, &quot;carl&quot;, &quot;sagan&quot;)
</code></pre>
<h2 id="è¿”å›ä¼ å…¥çš„åˆ‡ç‰‡">è¿”å›ä¼ å…¥çš„åˆ‡ç‰‡</h2>
<p>ä¸èƒ½ä½¿ç”¨å¯å˜å‚æ•°ä½œä¸ºè¿”å›ç»“æœç±»å‹ï¼Œä½†æ˜¯å¯ä»¥å°†å…¶ä½œä¸ºç‰‡è¿”å›ã€‚</p>
<pre><code class="language-go">func f(nums ...int) []int {
  nums[1] = 10
  return nums
}
</code></pre>
<p>å½“ä½ å°†ä¸€ä¸ª slice ä½œä¸ºå‚æ•°ä¼ å…¥ f æ—¶ï¼Œå®ƒå°†è¿”å›ä¸€ä¸ªç›¸åŒçš„æ–° sliceã€‚ä¼ å…¥å’Œè¿”å›çš„åˆ‡ç‰‡æ˜¯ç›¸å…³è”çš„ã€‚ä¸¤ä¸ªä¸­ä»»æ„ä¸€ä¸ªæ”¹å˜éƒ½ä¼šå½±å“åˆ°å¦ä¸€ä¸ªã€‚</p>
<pre><code class="language-go">nums  := []int{23, 45, 67}
nums2 := f(nums...)
</code></pre>
<p>è¿™é‡Œï¼Œnums å’Œ nums2æœ‰ç›¸åŒçš„å…ƒç´ ï¼Œå› ä¸ºå®ƒä»¬éƒ½æŒ‡å‘ç›¸åŒçš„åº•å±‚æ•°ç»„ã€‚</p>
<pre><code class="language-go">nums  = []int{10, 45, 67}
nums2 = []int{10, 45, 67}
</code></pre>
<p>ğŸ‘‰ <a href="https://play.golang.org/p/Jun14DYWvq">è¿™æ®µä»£ç </a> åŒ…å«å…³äº slice åŸºç¡€æ•°ç»„çš„è¯¦ç»†è¯´æ˜</p>
<h2 id="æ‰©å±•æ“ä½œç¬¦åæ¨¡å¼">æ‰©å±•æ“ä½œç¬¦åæ¨¡å¼</h2>
<p>å¦‚æœä½ æœ‰ä¸€ä¸ª funcsï¼Œå®ƒä»¬å”¯ä¸€çš„ç”¨é€”å°±æ˜¯æ¥å—å¯å˜æ•°é‡çš„å‚æ•°ï¼Œé‚£ä¹ˆæœ€å¥½ä½¿ç”¨å¯å˜å‚æ•°å‡½æ•°ä»£æ›¿ä½¿ç”¨ sliceã€‚</p>
<pre><code class="language-go">// Don't do this
toFullname([]string{&quot;rob&quot;, &quot;pike&quot;}...)

// Do this
toFullname(&quot;rob&quot;, &quot;pike&quot;)
</code></pre>
<p><a href="https://play.golang.org/p/oKQjwotLC_">è¿è¡Œä»£ç </a></p>
<h2 id="ä½¿ç”¨å¯å˜å‚æ•°çš„é•¿åº¦">ä½¿ç”¨å¯å˜å‚æ•°çš„é•¿åº¦</h2>
<p>ä½ å¯ä»¥ä½¿ç”¨å¯å˜å‚æ•°çš„é•¿åº¦æ¥æ”¹å˜å‡½æ•°çš„è¡Œä¸ºã€‚</p>
<pre><code class="language-go">func ToIP(parts ...byte) string {
  parts = append(parts, make([]byte, 4-len(parts))...)  
  
  return fmt.Sprintf(&quot;%d.%d.%d.%d&quot;, 
    parts[0], parts[1], parts[2], parts[3])
}
</code></pre>
<p>ToIP func å°†â€œ partsâ€ä½œä¸ºå¯å˜å‚æ•°ï¼Œå¹¶ä½¿ç”¨ parts param çš„é•¿åº¦è¿”å›é»˜è®¤å€¼ä¸º0çš„å­—ç¬¦ä¸²å½¢å¼çš„ IP åœ°å€ã€‚</p>
<pre><code class="language-go">ToIP(255)   // 255.0.0.0
ToIP(10, 1) // 10.1.0.0
ToIP(127, 0, 0, 1) // 127.0.0.1
</code></pre>
<p><a href="https://play.golang.org/p/j9RcLvbs3K">è¿è¡Œä»£ç </a></p>
<h1 id="å˜é‡å‡½æ•°çš„ç­¾å">âœª å˜é‡å‡½æ•°çš„ç­¾å</h1>
<p>å°½ç®¡å¯å˜å‚æ•°å‡½æ•°æ˜¯ä¸€ç§è¯­æ³•ç³–ï¼Œä½†å®ƒçš„ç­¾å<a href="https://golang.org/ref/spec#Type_identity">ç±»å‹æ ‡è¯†</a>ä¸æ¥å—åˆ‡ç‰‡çš„å‡½æ•°æ˜¯ä¸åŒçš„ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­çœ‹ä¸€ä¸‹å­—ç¬¦ä¸²åˆ‡ç‰‡å’Œ ...å­—ç¬¦ä¸²çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p><em><strong>ä¸€ä¸ªå¯å˜å‚æ•°å‡½æ•°çš„ç­¾å:</strong></em></p>
<pre><code class="language-go">func PrintVariadic(msgs ...string)// signature: func(msgs ...string)
</code></pre>
<p><em><strong>éå¯å˜å‚æ•°å‡½æ•°çš„ç­¾å:</strong></em></p>
<pre><code class="language-go">func PrintSlice(msgs []string)// signature: func([]string)
</code></pre>
<p><em>å®ƒä»¬çš„ç±»å‹æ ‡è¯†ä¸ä¸€æ ·ï¼Œæˆ‘ä»¬æŠŠå®ƒä»¬èµ‹å€¼ç»™å˜é‡:</em></p>
<pre><code class="language-go">variadic := PrintVariadic   // variadic is a func(...string)
slicey := PrintSlice       // slice is a func([]string)
</code></pre>
<p>å› æ­¤ï¼Œå…¶ä¸­ä¸€ä¸ªä¸èƒ½æ›¿ä»£å¦ä¸€ä¸ª:</p>
<pre><code class="language-go">slicey = variadic// error: type mismatch
</code></pre>
<p><a href="https://play.golang.org/p/fsZYGgTyvF">è¿è¡Œä»£ç </a></p>
<h1 id="æ··åˆå˜é‡å’Œéå¯å˜å‚æ•°">æ··åˆå˜é‡å’Œéå¯å˜å‚æ•°</h1>
<p>ä½ å¯ä»¥é€šè¿‡æŠŠéå¯å˜å‚æ•°æ”¾åœ¨å¯å˜å‚æ•°ä¹‹å‰ï¼Œå°†éå¯å˜å‚æ•°ä¸å¯å˜å‚æ•°æ··åˆã€‚</p>
<pre><code class="language-go">func toFullname(id int, names ...string) string {
  return fmt.Sprintf(&quot;#%02d: %s&quot;, id, strings.Join(names, &quot; &quot;))
}

toFullname(1, &quot;carl&quot;, &quot;sagan&quot;)// output: &quot;#01: carl sagan&quot;
</code></pre>
<p>ä½†æ˜¯ï¼Œä½ ä¸èƒ½å°†éå¯å˜å‚æ•°æ”¾åˆ°å¯å˜å‚æ•°ä¹‹å:</p>
<pre><code class="language-go">func toFullname(id int, names ...string, age int) string {}// error
</code></pre>
<p><a href="https://play.golang.org/p/TlbDYapOCD">è¿è¡Œä»£ç </a></p>
<h2 id="æ¥å—å˜é‡ç±»å‹çš„å‚æ•°">æ¥å—å˜é‡ç±»å‹çš„å‚æ•°</h2>
<p>ä¾‹å¦‚ï¼Œ<a href="https://golang.org/src/fmt/print.go#L189"><em>Go Stdlib çš„ Printf</em></a> å‡½æ•°ï¼Œä½¿ç”¨ç©ºæ¥å£ç±»å‹æ¥å—ä»»ä½•ç±»å‹çš„è¾“å…¥å‚æ•°ã€‚ä½ è¿˜å¯ä»¥ä½¿ç”¨ç©ºæ¥å£æ¥å—ä»»æ„ç±»å‹å’Œä»»æ„æ•°é‡çš„å‚æ•°ã€‚</p>
<pre><code class="language-go">func Printf(format string, a ...interface{}) (n int, err error) {
    /* this is a pass-through with a... */  
    return Fprintf(os.Stdout, format, a...)
}

fmt.Printf(&quot;%d %s %f&quot;, 1, &quot;string&quot;, 3.14)    // output: &quot;1 string 3.14&quot;
</code></pre>
<h2 id="ä¸ºä»€ä¹ˆ-printf-åªæ¥å—ä¸€ä¸ªå˜é‡å‚æ•°">ä¸ºä»€ä¹ˆ Printf åªæ¥å—ä¸€ä¸ªå˜é‡å‚æ•°ï¼Ÿ</h2>
<p>æŸ¥çœ‹ Printf çš„ç­¾åæ—¶ï¼Œä¼šå‘ç°å®ƒæ¥å—ä¸€ä¸ªåä¸º format çš„å­—ç¬¦ä¸²å’Œä¸€ä¸ªå¯å˜å‚æ•°ã€‚</p>
<pre><code class="language-go">func Printf(format string, a ...interface{})
</code></pre>
<p>è¿™æ˜¯å› ä¸ºformatæ˜¯å¿…éœ€çš„å‚æ•°ã€‚Printf å¼ºåˆ¶æ‚¨æä¾›å®ƒï¼Œå¦åˆ™ä»£ç å°†æ— æ³•ç¼–è¯‘ã€‚</p>
<p>å¦‚æœå®ƒé€šè¿‡ä¸€ä¸ªå¯å˜å‚æ•°æ¥æ”¶æ‰€æœ‰å‚æ•°ï¼Œé‚£ä¹ˆè°ƒç”¨æ–¹å¯èƒ½æ²¡æœ‰æä¾›å¿…è¦çš„æ ¼å¼åŒ–ç¨‹åºå‚æ•°ï¼Œæˆ–è€…ä»å¯è¯»æ€§è§’åº¦æ¥çœ‹ï¼Œå®ƒä¸ä¼šåƒè¿™ä¸ªå‚æ•°é‚£ä¹ˆæ˜ç¡®ã€‚<em>å®ƒæ¸…æ¥šåœ°æ ‡æ˜äº† Printf éœ€è¦ä»€ä¹ˆ</em>ã€‚</p>
<p>æ­¤å¤–ï¼Œè°ƒç”¨æ—¶ä¸ä¼ äººå˜é‡å‚æ•°â€œaâ€ï¼Œå®ƒå°†é˜²æ­¢ <em>Printf</em> åœ¨ å‡½æ•°ä¸­åˆ›å»ºä¸€ä¸ªä¸å¿…è¦çš„åˆ‡ç‰‡ï¼Œä¸€ä¸ªå€¼ä¸º nil åˆ‡ç‰‡ã€‚<em>This may not be a clear win for Printf but it can be for you in your own code</em>ã€‚</p>
<p>ä½ ä¹Ÿå¯ä»¥åœ¨è‡ªå·±çš„ä»£ç ä¸­ä½¿ç”¨ç›¸åŒçš„æ¨¡å¼ã€‚</p>
<h2 id="æ³¨æ„ç©ºæ¥å£ç±»å‹">æ³¨æ„ç©ºæ¥å£ç±»å‹</h2>
<p><code>interface{}</code>ç±»å‹ä¹Ÿç§°ä¸ºç©ºæ¥å£ç±»å‹ï¼Œè¿™æ„å‘³ç€å®ƒç»•è¿‡äº†è‡ªèº«çš„ Go é™æ€ç±»å‹è¯­ä¹‰æ£€æŸ¥ã€‚ä¸å¿…è¦åœ°ä½¿ç”¨å®ƒä¼šç»™ä½ å¸¦æ¥å¼Šå¤§äºåˆ©çš„åæœã€‚</p>
<p>ä¾‹å¦‚ï¼Œå®ƒå¯èƒ½å¼ºåˆ¶ä½ ä½¿ç”¨<a href="https://blog.golang.org/laws-of-reflection"><em>reflection</em></a>ï¼Œè¿™æ˜¯ä¸€ä¸ªè¿è¡Œæ—¶ç‰¹æ€§(<em>instead of fast and safe â€” compile-time)</em>ã€‚ä½ å¯èƒ½éœ€è¦è‡ªå·±æŸ¥æ‰¾ç±»å‹é”™è¯¯ï¼Œè€Œä¸æ˜¯ä¾èµ–äºç¼–è¯‘å™¨å¸®ä½ æ‰¾åˆ°å®ƒä»¬ã€‚</p>
<blockquote>
<p>åœ¨ä½¿ç”¨ç©ºæ¥å£ä¹‹å‰è¦ä»”ç»†è€ƒè™‘ï¼Œä¾é æ˜¾å¼ç±»å‹å’Œæ¥å£æ¥å®ç°æ‰€éœ€çš„è¡Œä¸ºã€‚</p>
</blockquote>
<h2 id="å°†åˆ‡ç‰‡ä¼ é€’ç»™å…·æœ‰ç©ºæ¥å£çš„å¯å˜å‚æ•°">å°†åˆ‡ç‰‡ä¼ é€’ç»™å…·æœ‰ç©ºæ¥å£çš„å¯å˜å‚æ•°</h2>
<p>ä½ ä¸èƒ½å°†ä¸€ä¸ªæ™®é€šçš„åˆ‡ç‰‡ä¼ é€’ç»™ä¸€ä¸ªå…·æœ‰ç©ºæ¥å£ç±»å‹çš„å¯å˜å‚æ•°ã€‚å…·ä½“åŸå› <a href="https://golang.org/doc/faq#convert_slice_of_interface">è¯·é˜…è¯»è¿™é‡Œ</a>ã€‚</p>
<pre><code class="language-go">hellos := []string{&quot;hi&quot;, &quot;hello&quot;, &quot;merhaba&quot;}
</code></pre>
<p><em>You expect this to work, but it doesnâ€™t:</em></p>
<p>ä½ å¯èƒ½æœŸæœ›è¿™èƒ½ç”Ÿæ•ˆï¼Œä½†äº‹å®å¹¶éå¦‚æ­¤:</p>
<pre><code class="language-go">fmt.Println(hellos...)
</code></pre>
<p>å› ä¸ºï¼Œhello æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªç©ºæ¥å£åˆ‡ç‰‡ã€‚å¯å˜å‚æ•°æˆ–åˆ‡ç‰‡åªèƒ½å±äºä¸€ç§ç±»å‹ã€‚</p>
<p>é¦–å…ˆéœ€è¦å°† <em>hellos</em> slice è½¬æ¢ä¸ºä¸€ä¸ªç©ºæ¥å£ slice:</p>
<pre><code class="language-go">var ihellos []interface{} = make([]interface{}, len(hello))for i, hello := range hellos {
  ihellos[i] = hello
}
</code></pre>
<p><em>Now, the expansion operator will work:</em></p>
<p>ç°åœ¨ï¼Œæ‰©å±•è¿ç®—ç¬¦å°†å¼€å§‹ç”Ÿæ•ˆ:</p>
<pre><code class="language-go">fmt.Println(ihellos...)
// output: [hi hello merhaba]
</code></pre>
<p><a href="https://play.golang.org/p/8uRHsHFKSx">è¿è¡Œä»£ç </a></p>
<h1 id="å‡½æ•°å¼ç¼–ç¨‹æ–¹é¢">å‡½æ•°å¼ç¼–ç¨‹æ–¹é¢</h1>
<p>ä½ è¿˜å¯ä»¥ä½¿ç”¨å¯å˜å‚æ•°å‡½æ•°æ¥å—å¯å˜æ•°ç›®çš„å‡½æ•°ã€‚è®©æˆ‘ä»¬å£°æ˜ä¸€ä¸ªæ–°çš„ formatter func ç±»å‹ã€‚æ ¼å¼åŒ–ç¨‹åº func è·å–å¹¶è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²:</p>
<pre><code class="language-go">type formatter func(s string) string
</code></pre>
<p>è®©æˆ‘ä»¬å£°æ˜ä¸€ä¸ªå¯å˜å‚æ•°å‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²å’Œæ•°é‡å¯é€‰çš„å¯æ ¼å¼åŒ–çš„ç±»å‹ï¼Œä»¥ä¾¿ä½¿ç”¨ä¸€äº›pipelineæ¥æ ¼å¼åŒ–å­—ç¬¦ä¸²ã€‚</p>
<pre><code class="language-go">func format(s string, fmtrs ...formatter) string {
  for _, fmtr := range fmtrs {
    s = fmtr(s)
  }  return s
}

format(&quot; alan turing &quot;, trim, last, strings.ToUpper)// output: TURING
</code></pre>
<p><a href="https://play.golang.org/p/kCOP6_5h-t">è¿è¡Œä»£ç </a></p>
<p>æ‚¨è¿˜å¯ä»¥ä½¿ç”¨channelsã€structsç­‰æ¥ä»£æ›¿è¿™ç§é“¾å¼æ¨¡å¼çš„å‡½æ•°ã€‚çœ‹* <a href="https://golang.org/pkg/io/#MultiReader"><em>è¿™é‡Œ</em></a> <em>æˆ–è€…</em> <a href="https://golang.org/src/text/template/parse/parse.go?s=1642:1753#L41"><em>è¿™é‡Œ</em></a> <em>æŸ¥çœ‹ç¤ºä¾‹.</em></p>
<h2 id="ä½¿ç”¨ç»“æœä¸ºsliceçš„å‡½æ•°ä½œä¸ºå¯å˜å‚æ•°">ä½¿ç”¨ç»“æœä¸ºsliceçš„å‡½æ•°ä½œä¸ºå¯å˜å‚æ•°</h2>
<p>è®©æˆ‘ä»¬é‡å¤ä½¿ç”¨ä¸Šé¢çš„â€œformat funcâ€æ¥åˆ›å»ºä¸€ä¸ªå¯é‡ç”¨çš„æ ¼å¼åŒ–ç®¡é“æ„å»ºå™¨:</p>
<pre><code class="language-go">func build(f string) []formatter {
  switch f {
    case &quot;lastUpper&quot;:
      return []formatter{trim, last, strings.ToUpper}
    case &quot;trimUpper&quot;:
      return []formatter{trim, strings.ToUpper}
    // ...etc
    default:
      return identityFormatter
  }
}
</code></pre>
<p>ç„¶åä½¿ç”¨ expand è¿ç®—ç¬¦è¿è¡Œå®ƒï¼Œæœ€åå°†ç»“æœæä¾›ç»™æ ¼å¼ func:</p>
<pre><code class="language-go">format(&quot; alan turing &quot;, build(&quot;lastUpper&quot;)...)// output: TURING
</code></pre>
<h2 id="å¯å˜å‚æ•°é€‰é¡¹æ¨¡å¼">å¯å˜å‚æ•°é€‰é¡¹æ¨¡å¼</h2>
<p><em>You may have already been familiar with this pattern from other OOP langs and this has been re-popularized again in Go by Rob Pike</em> <a href="https://commandcenter.blogspot.com.tr/2014/01/self-referential-functions-and-design.html"><em>here</em></a> <em>back in 2014. Itâ€™s like the</em> <a href="https://en.wikipedia.org/wiki/Visitor_pattern"><em>visitor pattern</em></a><em>.</em></p>
<p>ä½ å¯èƒ½å·²ç»ç†Ÿæ‚‰è¿™ç§æ¥è‡ªå…¶ä»– OOP è¯­è¨€çš„æ¨¡å¼ï¼Œè¿™ç§<a href="https://commandcenter.blogspot.com.tr/2014/01/self-referential-functions-and-design.html">æ¨¡å¼</a>åœ¨2014å¹´ Rob Pike çš„ Go ä¸­å†æ¬¡æµè¡Œèµ·æ¥ã€‚è¿™å°±åƒæ˜¯<a href="https://en.wikipedia.org/wiki/Visitor_pattern">è®¿å®¢æ¨¡å¼</a>ã€‚</p>
<p>è¿™ä¸ªä¾‹å­å¯¹ä½ æ¥è¯´å¯èƒ½æœ‰ç‚¹éš¾ã€‚å¦‚æœæœ‰ä¸ç†è§£çš„è¯·åŠæ—¶æé—®&lt;ä½œè€…ä¸åœ¨ï¼ŒæŸ¥çœ‹åŸæ–‡é“¾æ¥æé—®å§ğŸ˜‚&gt;ã€‚</p>
<p>è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª Loggerï¼Œå¯ä»¥ä½¿ç”¨å¯é€‰æ¨¡å¼åœ¨è¿è¡Œæ—¶æ›´æ”¹è¯¦ç»†ç¨‹åº¦å’Œå‰ç¼€:</p>
<pre><code class="language-go">type Logger struct {
  verbosity
  prefix string
}
</code></pre>
<p>ä½¿ç”¨ä¸€ä¸ªå¯å˜çš„é€‰é¡¹å‚æ•°æ¥æ”¹å˜loggerçš„è¡Œä¸º:</p>
<pre><code class="language-go">func (lo *Logger) SetOptions(opts ...option) {
  for _, applyOptTo := range opts {
    applyOptTo(lo)
  }
}
</code></pre>
<p>æˆ‘ä»¬åˆ›å»ºä¸€äº›è¿”å›é…ç½®æ–¹æ³•çš„å‡½æ•°ï¼Œå®ƒä»¬åœ¨ä¸€ä¸ªé—­åŒ…ä¸­æ”¹å˜ Logger çš„æ“ä½œè¡Œä¸ºï¼š</p>
<pre><code class="language-go">func HighVerbosity() option {
  return func(lo *Logger) {
    lo.verbosity = High
  }
}

func Prefix(s string) option {
  return func(lo *Logger) {
    lo.prefix = s
  }
}
</code></pre>
<p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬ç”¨é»˜è®¤é€‰é¡¹åˆ›å»ºä¸€ä¸ªæ–°çš„ Logger:</p>
<pre><code class="language-go">logger := &amp;Logger{}
</code></pre>
<p>ç„¶åé€šè¿‡å˜é‡å‚æ•°å‘è®°å½•å™¨æä¾›é€‰é¡¹:</p>
<pre><code class="language-go">logger.SetOptions(
  HighVerbosity(), 
  Prefix(&quot;ZOMBIE CONTROL&quot;),
)
</code></pre>
<p>ç°åœ¨è®©æˆ‘ä»¬æ£€æŸ¥ä¸€ä¸‹è¾“å‡º:</p>
<pre><code class="language-go">logger.Critical(&quot;zombie outbreak!&quot;)
// [ZOMBIE CONTROL] CRITICAL: zombie outbreak!

logger.Info(&quot;1 second passed&quot;)
// [ZOMBIE CONTROL] INFO: 1 second passed
</code></pre>
<p><a href="https://play.golang.org/p/X2XHSdYgdq">è¿è¡Œä»£ç </a></p>
<h1 id="æ— ç©·æ— å°½çš„ç²¾ç¥é£Ÿç²®">âœª æ— ç©·æ— å°½çš„ç²¾ç¥é£Ÿç²®ï¼</h1>
<ul>
<li>åœ¨ Go 2ä¸­ï¼Œæœ‰ä¸€äº›å¯å˜å‡½æ•°çš„è¡Œä¸ºçš„è®¡åˆ’*<a href="https://github.com/golang/go/issues/15209"><em>è¿™é‡Œ</em></a><em>,</em> <a href="https://github.com/golang/go/issues/18605"><em>here è¿™é‡Œ</em></a><em>,åŠ</em><a href="https://github.com/golang/go/issues/19218"><em>è¿™é‡Œ</em></a><em>.</em></li>
<li><em>ä½ å¯ä»¥åœ¨ Go è¯­è¨€æ ‡å‡†æ–‡æ¡£é‡Œæ‰¾åˆ°æ›´æ­£å¼çš„å¯å˜å‚æ•°å‡½æ•°æŒ‡å—,</em><a href="https://golang.org/ref/spec#Passing_arguments_to_..._parameters"><em>è¿™é‡Œ</em></a><em>,</em> <a href="https://golang.org/ref/spec#Appending_and_copying_slices"><em>è¿™é‡Œ</em></a><em>,</em> <a href="https://golang.org/ref/spec#Appending_and_copying_slices"><em>è¿™é‡Œ</em></a> <em>åŠ</em><a href="https://golang.org/ref/spec#Type_identity"><em>è¿™é‡Œ</em></a><em>.</em></li>
<li><a href="https://sunzenshen.github.io/tutorials/2015/05/09/cgotchas-intro.html"><em>ä½¿ç”¨æ¥è‡ª c çš„å¯å˜å‡½æ•°</em></a><em>.</em></li>
<li><em>ä½ å¯ä»¥æ‰¾åˆ°å¾ˆå¤šè¯­è¨€çš„å¯å˜å‚æ•°å‡½æ•°å£°æ˜</em><a href="https://rosettacode.org/wiki/Variadic_function"><em>è¿™é‡Œ</em></a><em>.è‡ªç”±æ¢ç´¢å§</em></li>
</ul>
<p>å¥½äº†ï¼Œå°±åˆ°è¿™äº†ã€‚è°¢è°¢ä½ ä»¬çš„é˜…è¯»ã€‚</p>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li><a href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0%E5%87%BD%E6%95%B0">ä»€ä¹ˆæ˜¯å¯å˜å‚æ•°å‡½æ•°ï¼Ÿ</a>
<ul>
<li><a href="#%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0%E5%87%BD%E6%95%B0">ä¸€ä¸ªç®€å•çš„å¯å˜å‚æ•°å‡½æ•°</a></li>
<li><a href="#%E4%BD%A0%E5%8F%AF%E4%BB%A5%E4%BC%A0%E5%85%A5%E9%9B%B6%E4%B8%AA%E6%88%96%E5%A4%9A%E4%B8%AA%E5%8F%82%E6%95%B0">ä½ å¯ä»¥ä¼ å…¥é›¶ä¸ªæˆ–å¤šä¸ªå‚æ•°</a></li>
<li><a href="#%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E4%BD%BF%E7%94%A8%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0%E5%87%BD%E6%95%B0">ä»€ä¹ˆæ—¶å€™ä½¿ç”¨å¯å˜å‚æ•°å‡½æ•°ï¼Ÿ</a></li>
<li><a href="#%E4%BE%8B%E5%AD%90">ä¾‹å­:</a></li>
</ul>
</li>
<li><a href="#%E5%88%87%E7%89%87%E4%B8%8E%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0%E5%87%BD%E6%95%B0">åˆ‡ç‰‡ä¸å¯å˜å‚æ•°å‡½æ•°</a>
<ul>
<li><a href="#%E4%B8%8D%E4%BC%A0%E5%85%A5%E5%8F%82%E6%95%B0">ä¸ä¼ å…¥å‚æ•°</a></li>
<li><a href="#%E5%A6%82%E4%BD%95%E4%BC%A0%E9%80%92%E4%B8%80%E4%B8%AA%E5%88%87%E7%89%87">å¦‚ä½•ä¼ é€’ä¸€ä¸ªåˆ‡ç‰‡ï¼Ÿ</a></li>
<li><a href="#passed-slices-spooky-action-at-a-distance">Passed sliceâ€™s spooky action at a distance</a></li>
<li><a href="#%E5%8A%A8%E6%80%81%E4%BC%A0%E9%80%92%E5%A4%9A%E4%B8%AA%E5%88%87%E7%89%87">åŠ¨æ€ä¼ é€’å¤šä¸ªåˆ‡ç‰‡</a></li>
<li><a href="#%E8%BF%94%E5%9B%9E%E4%BC%A0%E5%85%A5%E7%9A%84%E5%88%87%E7%89%87">è¿”å›ä¼ å…¥çš„åˆ‡ç‰‡</a></li>
<li><a href="#%E6%89%A9%E5%B1%95%E6%93%8D%E4%BD%9C%E7%AC%A6%E5%8F%8D%E6%A8%A1%E5%BC%8F">æ‰©å±•æ“ä½œç¬¦åæ¨¡å¼</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0%E7%9A%84%E9%95%BF%E5%BA%A6">ä½¿ç”¨å¯å˜å‚æ•°çš„é•¿åº¦</a></li>
</ul>
</li>
<li><a href="#%E5%8F%98%E9%87%8F%E5%87%BD%E6%95%B0%E7%9A%84%E7%AD%BE%E5%90%8D">âœª å˜é‡å‡½æ•°çš„ç­¾å</a></li>
<li><a href="#%E6%B7%B7%E5%90%88%E5%8F%98%E9%87%8F%E5%92%8C%E9%9D%9E%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0">æ··åˆå˜é‡å’Œéå¯å˜å‚æ•°</a>
<ul>
<li><a href="#%E6%8E%A5%E5%8F%97%E5%8F%98%E9%87%8F%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%8F%82%E6%95%B0">æ¥å—å˜é‡ç±»å‹çš„å‚æ•°</a></li>
<li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88-printf-%E5%8F%AA%E6%8E%A5%E5%8F%97%E4%B8%80%E4%B8%AA%E5%8F%98%E9%87%8F%E5%8F%82%E6%95%B0">ä¸ºä»€ä¹ˆ Printf åªæ¥å—ä¸€ä¸ªå˜é‡å‚æ•°ï¼Ÿ</a></li>
<li><a href="#%E6%B3%A8%E6%84%8F%E7%A9%BA%E6%8E%A5%E5%8F%A3%E7%B1%BB%E5%9E%8B">æ³¨æ„ç©ºæ¥å£ç±»å‹</a></li>
<li><a href="#%E5%B0%86%E5%88%87%E7%89%87%E4%BC%A0%E9%80%92%E7%BB%99%E5%85%B7%E6%9C%89%E7%A9%BA%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0">å°†åˆ‡ç‰‡ä¼ é€’ç»™å…·æœ‰ç©ºæ¥å£çš„å¯å˜å‚æ•°</a></li>
</ul>
</li>
<li><a href="#%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B%E6%96%B9%E9%9D%A2">å‡½æ•°å¼ç¼–ç¨‹æ–¹é¢</a>
<ul>
<li><a href="#%E4%BD%BF%E7%94%A8%E7%BB%93%E6%9E%9C%E4%B8%BAslice%E7%9A%84%E5%87%BD%E6%95%B0%E4%BD%9C%E4%B8%BA%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0">ä½¿ç”¨ç»“æœä¸ºsliceçš„å‡½æ•°ä½œä¸ºå¯å˜å‚æ•°</a></li>
<li><a href="#%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0%E9%80%89%E9%A1%B9%E6%A8%A1%E5%BC%8F">å¯å˜å‚æ•°é€‰é¡¹æ¨¡å¼</a></li>
</ul>
</li>
<li><a href="#%E6%97%A0%E7%A9%B7%E6%97%A0%E5%B0%BD%E7%9A%84%E7%B2%BE%E7%A5%9E%E9%A3%9F%E7%B2%AE">âœª æ— ç©·æ— å°½çš„ç²¾ç¥é£Ÿç²®ï¼</a></li>
</ul>

              </div>
            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">ä¸‹ä¸€ç¯‡</div>
            <a href="http://blog.gusibi.site/post/yu-xiang-rou-si/">
              <h3 class="post-title">
                é±¼é¦™è‚‰ä¸
              </h3>
            </a>
          </div>
        

        
          

          
            <link rel="stylesheet" href="https://unpkg.com/disqusjs@1.1/dist/disqusjs.css">
<script src="https://unpkg.com/disqusjs@1.1/dist/disqus.js"></script>

<div id="disqus_thread"></div>

<script>

var options = {
  shortname: 'gu-si-bi',
  apikey: '',
}
if ('') {
  options.api = ''
}
var dsqjs = new DisqusJS(options)

</script>

          
        

        <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
  <a class="rss" href="http://blog.gusibi.site/atom.xml" target="_blank">
    <i class="ri-rss-line"></i> RSS
  </a>
</div>

      </div>
    </div>

    <script>
      hljs.initHighlightingOnLoad()

      let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

      // This should probably be throttled.
      // Especially because it triggers during smooth scrolling.
      // https://lodash.com/docs/4.17.10#throttle
      // You could do like...
      // window.addEventListener("scroll", () => {
      //    _.throttle(doThatStuff, 100);
      // });
      // Only not doing it here to keep this Pen dependency-free.

      window.addEventListener("scroll", event => {
        let fromTop = window.scrollY;

        mainNavLinks.forEach((link, index) => {
          let section = document.getElementById(decodeURI(link.hash).substring(1));
          let nextSection = null
          if (mainNavLinks[index + 1]) {
            nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
          }
          if (section.offsetTop <= fromTop) {
            if (nextSection) {
              if (nextSection.offsetTop > fromTop) {
                link.classList.add("current");
              } else {
                link.classList.remove("current");    
              }
            } else {
              link.classList.add("current");
            }
          } else {
            link.classList.remove("current");
          }
        });
      });

    </script>
  </body>
</html>
